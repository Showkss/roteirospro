// Dados dos roteiros
const roteiros = {
    pergunta: {
        titulo: "Você que é de [REGIÃO] e tem um filho(a) entre 6 e 14 anos... já pensou em preparar ele(a) para as profissões do futuro?",
        conteudo: `Você já parou pra pensar que a maioria das profissões que o seu filho(a) vai disputar ainda nem existem?

Mas existe uma habilidade que quase todas elas vão exigir: programação.

E agora vem o melhor: você pode testar isso sem compromisso, com uma aula experimental totalmente gratuita.

Aqui na [ESCOLA], a gente ensina crianças de forma leve, divertida e prática, com jogos, desafios e muito mais.

Mesmo sem saber nada de tecnologia, seu filho(a) vai sair da aula dando os primeiros passos como programador.

Pra agendar essa aula grátis, é só clicar aqui no botão, mandar um "Oi" no WhatsApp e a gente cuida do resto.

Mas atenção: as vagas são limitadas. Clique agora e garanta a aula experimental do seu filho(a)!`,
        ctr: "1.2%",
        conversao: "8.5%"
    },
    historia: {
        titulo: "Meu filho(a) trocou o joguinho por criar o próprio jogo…",
        conteudo: `"Eu achava que meu filho(a) era só mais um viciado em joguinho… até ele(a) sair de uma aula experimental de programação falando que queria criar o próprio jogo."

Isso foi o que uma mãe nos contou depois da primeira aula gratuita que oferecemos aqui na [ESCOLA].

Muita gente acha que programação é coisa de adulto… mas quando a criança entende que ela pode usar o computador pra criar e não só consumir, tudo muda.

Aqui, a gente transforma o interesse em tecnologia em algo construtivo: lógica, criatividade, foco e autoconfiança.

E você pode ver isso sem pagar nada, em uma aula experimental 100% gratuita.

Quer viver essa experiência com seu filho(a)?

Clica no botão, fala com a gente no WhatsApp e garante a vaga dele(a). ele(a) vai sair da aula querendo programar o mundo!`,
        ctr: "1.1%",
        conversao: "9.2%"
    },
    quebraObjecao: {
        titulo: `"Será que meu filho(a) vai gostar mesmo de programação?"`,
        conteudo: `Essa é a pergunta que quase todos os pais fazem antes de agendar uma aula gratuita aqui na [ESCOLA].

E a resposta mais comum que recebemos depois da aula é:
"ele(a) saiu empolgadíssimo! Nunca vi meu filho(a) tão interessado em aprender."

Aqui a gente não ensina programação como em escola tradicional.
É gamificado, interativo e pensado pra envolver a criança no que ela mais gosta: resolver desafios, usar a imaginação e criar com liberdade.

Você pode tirar a dúvida sem risco nenhum.
Agende uma aula experimental totalmente gratuita. Se ele(a) gostar, ótimo. Se não, pelo menos você tentou.

Clica no botão aqui embaixo, fala com a gente no WhatsApp e a gente te explica tudo.`,
        ctr: "1.0%",
        conversao: "9.5%"
    },
    transformacao: {
        titulo: `De "não gosta de estudar" para "criou o próprio jogo com 9 anos" - tudo começou numa aula experimental grátis.`,
        conteudo: `Sabe aquela criança que tem dificuldade de concentração, que não se interessa por escola?
Temos muitos casos assim. E sabe o que muda isso? Dar propósito ao aprendizado.

Quando o aluno(a) entende que estudar pode ser divertido, ele(a) engaja.
Programação faz isso.

Aqui, crianças com apenas 8, 9 anos criam jogos, apps, histórias interativas.
E tudo começa com uma aula experimental gratuita.

Se você é de [REGIÃO], clique no botão abaixo, fale com a gente no WhatsApp e agende essa experiência.
Você vai ver seu filho(a) com brilho nos olhos, dizendo: "eu quero voltar semana que vem".`,
        ctr: "0.7%",
        conversao: "7.0%"
    },
    autoridade: {
        titulo: `Mark Zuckerberg, Bill Gates, Elon Musk... todos eles defendem uma coisa: aprender programação desde cedo.`,
        conteudo: `Os maiores nomes da tecnologia mundial têm algo em comum:
Todos incentivam as crianças a aprenderem programação desde os primeiros anos de vida.

E não é por acaso. Aprender a programar desde cedo desenvolve lógica, criatividade, pensamento crítico e resolução de problemas.

Na [ESCOLA], usamos uma metodologia internacional testada em mais de 30 países.
E agora, você pode experimentar de graça, com uma aula experimental presencial.

Clique no botão abaixo, fale com a gente no WhatsApp e agende a aula gratuita do seu filho(a).
É a chance de colocar ele(a) na frente, agora mesmo.`,
        ctr: "1.5%",
        conversao: "8.0%"
    },
    sintoma: {
        titulo: `Seu filho(a) só quer saber de celular e videogame? Isso pode ser um sinal...`,
        conteudo: `Se o seu filho(a) passa horas no celular, jogando ou vendo vídeos, saiba:
ele(a) pode estar dando sinais de que tem potencial para criar tecnologia, não só consumir.

Muitas crianças que chegam aqui desmotivadas com a escola descobrem que gostam de aprender - só não tinham encontrado o formato certo.

E quando elas percebem que podem criar seus próprios jogos, aplicativos e sites... tudo muda.
Essa transformação começa com uma aula gratuita de programação.

Clique aqui, fale com a gente no WhatsApp e agende uma aula experimental sem custo.
Você pode descobrir um talento que estava escondido aí na sua casa.`,
        ctr: "1.0%",
        conversao: "7.0%"
    },
    tecnico: {
        titulo: `Aprendizado com lógica, algoritmos, pensamento computacional... e muita diversão.`,
        conteudo: `Se você quer que seu filho(a) tenha uma base forte em lógica, raciocínio e resolução de problemas, mas de forma leve e divertida...
Programação é o caminho.

Aqui ensinamos crianças a partir de 6 anos com uma metodologia lúdica baseada em pensamento computacional e gamificação.

Nada de aulas teóricas e chatas. Tudo é feito com jogos, desafios e projetos.
Quer ver isso na prática?

Agende uma aula experimental gratuita.
Clique no botão, fale com a gente no WhatsApp e marque a aula para o seu filho(a).`,
        ctr: "0.6%",
        conversao: "7.2%"
    },
    contraintuitivo: {
        titulo: `Programação é difícil? Só se ensinar do jeito errado.`,
        conteudo: `Muita gente acha que programação é só para adultos, nerds ou gênios da matemática.
Mas a verdade é que, quando ensinada do jeito certo, até crianças de 6 anos conseguem aprender e se divertir com isso.

Na [ESCOLA], usamos jogos, desafios e histórias para ensinar lógica de programação desde cedo.
Os alunos saem das aulas dizendo "quero mais!"

Você pode ver isso de perto com uma aula experimental gratuita.
Clique no botão, fale com a gente no WhatsApp e garanta a vaga do seu filho(a)!`,
        ctr: "1.3%",
        conversao: "8.7%"
    },
    segmentado: {
        titulo: `Você que é de [REGIÃO] e tem um filho(a) de 6 a 14 anos... que tal dar a ele(a) um diferencial desde cedo?`,
        conteudo: `Se você mora em [REGIÃO], provavelmente já percebeu como é difícil achar atividades extracurriculares que unam diversão com aprendizado de verdade.

Aqui na [ESCOLA], oferecemos aulas lúdicas que ensinam lógica, criatividade e foco de um jeito que a criança ama.

E pra você conhecer, temos uma aula experimental totalmente gratuita.
Clica no botão, chama no WhatsApp e garanta essa vaga para seu filho(a).
Ele(a) vai te agradecer no futuro.`,
        ctr: "2.0%",
        conversao: "9.8%"
    },
    gerundio: {
        titulo: `Imaginando como seria se seu filho(a) aprendesse programação com 7 anos?`,
        conteudo: `Imaginando seu filho(a) criando o próprio jogo com 8 anos?
Construindo um site com 10?
Aprendendo lógica e raciocínio computacional brincando?

Isso já é realidade para dezenas de crianças aqui na [ESCOLA].
E pode começar com um simples passo: uma aula experimental gratuita.

Clica aqui no botão, chama a gente no WhatsApp e marca uma aula.
Você vai ver o brilho nos olhos dele(a) ao sair da sala dizendo: "quero fazer isso pra sempre!"`,
        ctr: "0.4%",
        conversao: "6.8%"
    }
};

// Inicialização
document.addEventListener('DOMContentLoaded', function() {
    // Inicializar AOS
    AOS.init({
        duration: 800,
        once: true,
        offset: 100
    });

    // Configurar navegação mobile
    setupMobileNav();
    
    // Configurar roteiros interativos
    setupRoteiros();
    
    // Configurar gráficos
    setupCharts();
    
    // Configurar calculadora ROI
    setupROICalculator();
    
    // Configurar scroll spy
    setupScrollSpy();
});

// Navegação mobile
function setupMobileNav() {
    const navToggle = document.getElementById('navToggle');
    const navMenu = document.getElementById('navMenu');
    
    navToggle.addEventListener('click', () => {
        navMenu.classList.toggle('active');
    });

    // Fechar menu ao clicar em link
    document.querySelectorAll('.nav-link').forEach(link => {
        link.addEventListener('click', () => {
            navMenu.classList.remove('active');
        });
    });
}

// Roteiros interativos
function setupRoteiros() {
    const tabButtons = document.querySelectorAll('.tab-button');
    const nomeEscolaInput = document.getElementById('nomeEscola');
    const regiaoInput = document.getElementById('regiao');
    const previewContent = document.getElementById('previewContent');
    const copyButton = document.getElementById('copyButton');
    const ctrValue = document.getElementById('ctrValue');
    const conversionValue = document.getElementById('conversionValue');
    
    let roteiroAtivo = 'pergunta'; // Define o roteiro inicial

    // Encontra o botão 'pergunta' e o ativa inicialmente
    const initialButton = document.querySelector('.tab-button[data-roteiro="pergunta"]');
    if (initialButton) {
        initialButton.classList.add('active');
    }
    
    // Atualizar preview inicial
    updatePreview();
    
    // Event listeners para tabs
    tabButtons.forEach(button => {
        button.addEventListener('click', () => {
            tabButtons.forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
            roteiroAtivo = button.dataset.roteiro;
            updatePreview();
        });
    });
    
    // Event listeners para inputs
    nomeEscolaInput.addEventListener('input', updatePreview);
    regiaoInput.addEventListener('input', updatePreview);
    
    // Copiar roteiro
    copyButton.addEventListener('click', () => {
        const texto = previewContent.textContent;
        navigator.clipboard.writeText(texto).then(() => {
            copyButton.textContent = '✅ Copiado!';
            setTimeout(() => {
                copyButton.textContent = '📋 Copiar Roteiro';
            }, 2000);
        });
    });
    
    function updatePreview() {
        const roteiro = roteiros[roteiroAtivo];
        const nomeEscola = nomeEscolaInput.value || '[NOME DA ESCOLA]';
        const regiao = regiaoInput.value || '[REGIÃO]';
        
        let conteudo = roteiro.titulo + '\n\n' + roteiro.conteudo;
        conteudo = conteudo.replace(/\[ESCOLA\]/g, nomeEscola);
        conteudo = conteudo.replace(/\[REGIÃO\]/g, regiao);
        
        previewContent.textContent = conteudo;
        ctrValue.textContent = roteiro.ctr;
        conversionValue.textContent = roteiro.conversao;
    }
}

// Configurar gráficos
function setupCharts() {
    // Gráfico de Classes Sociais
    const ctx1 = document.getElementById('classesSociaisChart').getContext('2d');
    new Chart(ctx1, {
        type: 'doughnut',
        data: {
            labels: ['Classe A', 'Classe B', 'Classe C', 'Outras'],
            datasets: [{
                data: [25, 45, 20, 10],
                backgroundColor: [
                    '#2563EB',
                    '#10B981',
                    '#F59E0B',
                    '#E5E7EB'
                ],
                borderWidth: 0
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'bottom',
                    labels: {
                        padding: 20,
                        usePointStyle: true
                    }
                },
                title: {
                    display: true,
                    text: 'Distribuição por Classe Social',
                    font: {
                        size: 16,
                        weight: 'bold'
                    }
                }
            }
        }
    });

    // Gráfico de Crescimento
    const ctx2 = document.getElementById('crescimentoChart').getContext('2d');
    new Chart(ctx2, {
        type: 'line',
        data: {
            labels: ['2019', '2020', '2021', '2022', '2023', '2024'],
            datasets: [{
                label: 'Franchising Educacional (%)',
                data: [8.2, 5.1, 9.8, 11.2, 12.1, 13.5],
                borderColor: '#2563EB',
                backgroundColor: 'rgba(37, 99, 235, 0.1)',
                borderWidth: 3,
                fill: true,
                tension: 0.4
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    display: false
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    ticks: {
                        callback: function(value) {
                            return value + '%';
                        }
                    }
                }
            }
        }
    });
}

// Calculadora ROI
function setupROICalculator() {
    const numAlunosInput = document.getElementById('numAlunos');
    const ticketMedioInput = document.getElementById('ticketMedio');
    const faturamentoMensal = document.getElementById('faturamentoMensal');
    const faturamentoAnual = document.getElementById('faturamentoAnual');
    
    function calcularROI() {
        const numAlunos = parseInt(numAlunosInput.value) || 0;
        const ticketMedio = parseInt(ticketMedioInput.value) || 0;
        
        const mensal = numAlunos * ticketMedio;
        const anual = mensal * 12;
        
        faturamentoMensal.textContent = `R$ ${mensal.toLocaleString('pt-BR')}`;
        faturamentoAnual.textContent = `R$ ${anual.toLocaleString('pt-BR')}`;
    }
    
    numAlunosInput.addEventListener('input', calcularROI);
    ticketMedioInput.addEventListener('input', calcularROI);
    
    // Calcular inicial
    calcularROI();
}

// Scroll Spy
function setupScrollSpy() {
    const sections = document.querySelectorAll('section[id]');
    const navLinks = document.querySelectorAll('.nav-link');
    
    window.addEventListener('scroll', () => {
        let current = '';
        
        sections.forEach(section => {
            const sectionTop = section.offsetTop;
            const sectionHeight = section.clientHeight;
            
            if (window.pageYOffset >= sectionTop - 200) {
                current = section.getAttribute('id');
            }
        });
        
        navLinks.forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('href') === `#${current}`) {
                link.classList.add('active');
            }
        });
    });
}

// Animações de entrada para números
function animateNumbers() {
    const numbers = document.querySelectorAll('.big-number');
    
    numbers.forEach(number => {
        const finalValue = number.textContent;
        const isPercentage = finalValue.includes('%');
        const isYear = finalValue.includes('anos');
        const isCurrency = finalValue.includes('R$');
        
        if (!isYear && !isCurrency) {
            const numericValue = parseFloat(finalValue.replace(/[^\d.]/g, ''));
            let currentValue = 0;
            const increment = numericValue / 50;
            
            const timer = setInterval(() => {
                currentValue += increment;
                if (currentValue >= numericValue) {
                    currentValue = numericValue;
                    clearInterval(timer);
                }
                
                if (isPercentage) {
                    number.textContent = currentValue.toFixed(1) + '%';
                } else {
                    number.textContent = Math.round(currentValue);
                }
            }, 30);
        }
    });
}

// Observador para animar números quando visíveis
const numberObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            animateNumbers();
            numberObserver.unobserve(entry.target);
        }
    });
});

document.addEventListener('DOMContentLoaded', () => {
    const dashboardSection = document.querySelector('.dashboard');
    if (dashboardSection) {
        numberObserver.observe(dashboardSection);
    }
});
